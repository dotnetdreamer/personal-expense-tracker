<ion-header>
  <ion-toolbar>
    <ion-title>{{'expense.add' | localizedresource | async}}</ion-title>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form class="custom-form" [formGroup]="formGroup">
    <div class="container">
      <!-- <ion-select formControlName="categoryId" placeholder="{{'category.title' | localizedresource | async}}">
        <ion-select-option [value]="cat.id" *ngFor="let cat of categories">
          <ion-icon name="close"></ion-icon>{{cat.name}}</ion-select-option>
      </ion-select> -->
      <ion-button fill="clear" (click)="onCategoryClicked($event)">
        <ion-icon name="clipboard-outline" *ngIf="!selectedCategory && !suggestedCategory"></ion-icon>
        <ion-icon [attr.name]="selectedCategory.icon" *ngIf="selectedCategory"></ion-icon>
        <ion-icon [attr.name]="suggestedCategory.icon" *ngIf="!selectedCategory && suggestedCategory"></ion-icon>
      </ion-button>
      <ion-list>
        <ion-item>
          <ion-input #description formControlName="description" debounce="300" 
            placeholder="{{'expense.description' | localizedresource | async}}" 
            (ionChange)="onDescriptionChanged($event)"></ion-input>
        </ion-item>
        <ion-item>
          <ion-input type="number" formControlName="amount" placeholder="e.g 100"></ion-input>
        </ion-item>
      </ion-list>
    </div>
  </form>
  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="onSaveClick(formGroup.value)" [disabled]="!formGroup.valid">
      <ion-icon name="checkmark-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
<ion-footer>
  <form class="custom-form" [formGroup]="formGroup">
    <ion-list>
      <ion-item lines="none">
        <ion-icon name="calendar-outline"></ion-icon>
        <ion-datetime [value]="todayDate" display-format="YYYY-MM-DD" 
          (ionChange)="onCreatedDateChanged($event)"></ion-datetime>
      </ion-item>
    </ion-list>
    <ion-list>
      <ion-item lines="none">
        <ion-button fill="clear" (click)="onNotesClicked()">
          <ion-icon slot="icon-only" name="reader-outline"></ion-icon>  
          <ion-icon name="pencil" *ngIf="formGroup.controls.notes.value"></ion-icon>      
        </ion-button>
      </ion-item>
      <ion-item lines="none">
        <ion-button fill="clear" *ngIf="!attachment || attachment?.markedForDelete">
          <input type="file" accept="*" (change)="onAttachmentChanged($event)"/>
          <ion-icon slot="icon-only" name="receipt-outline"></ion-icon>
        </ion-button> 
        <ion-button fill="clear" *ngIf="attachment && !attachment.markedForDelete" (click)="onAttachmentRemoveClicked()">
          <ion-icon slot="icon-only" name="receipt-outline"></ion-icon>
          <ion-icon name="trash"></ion-icon>
        </ion-button> 
      </ion-item>
    </ion-list>
  </form>
</ion-footer>
